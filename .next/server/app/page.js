(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var r=s(482),a=s(9108),l=s(2563),i=s.n(l),n=s(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,751)),"/Users/gmy/workspace/demo/frontend/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/Users/gmy/workspace/demo/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/gmy/workspace/demo/frontend/app/page.tsx"],x="/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},824:(e,t,s)=>{Promise.resolve().then(s.bind(s,8068))},2508:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},2153:()=>{},8068:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var r=s(2295),a=s(3729),l=s(4243),i=s(9046),n=s(340),c=s(7121),d=s(5329),o=s(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,o.Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),m=(0,o.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),h=(0,o.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var u=s(1838);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,o.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var p=s(4513),b=s(6075),y=s(8271);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,o.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),f=(0,o.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var N=s(3024);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,o.Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),w=(0,o.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var k=s(3733);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let C=(0,o.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Z=(0,o.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),M=(0,o.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var S=s(3380),$=s(1626);let _=["库存现金","银行存款","应收账款","预付账款","其他应收款","原材料","库存商品","固定资产","累计折旧","无形资产","短期借款","应付账款","预收账款","应付职工薪酬","应交税费","实收资本","资本公积","盈余公积","本年利润","利润分配","主营业务收入","其他业务收入","营业外收入","主营业务成本","其他业务成本","营业外支出","销售费用","管理费用","财务费用","研发费用"],D=[{title:"会计凭证录入",description:"上传原始凭证，AI自动生成标准会计凭证",prompt:"请帮我处理这些原始凭证，自动识别并生成符合会计规范的记账凭证。"},{title:"财务报表分析",description:"分析公司财务报表，评估财务状况",prompt:"请帮我分析一下这个公司的财务报表，重点关注盈利能力、偿债能力和运营效率。"},{title:"投资风险评估",description:"评估投资项目的风险和收益",prompt:"我想投资一个项目，请帮我评估一下投资风险和预期收益。"},{title:"税务筹划建议",description:"提供合法合规的税务优化建议",prompt:"请为我提供一些合法的税务筹划建议，帮助我合理节税。"},{title:"预算编制指导",description:"协助制定年度预算计划",prompt:"请帮我制定一个详细的年度预算计划，包括收入预测和支出控制。"},{title:"成本控制分析",description:"分析成本结构，提供优化建议",prompt:"请帮我分析公司的成本结构，并提供成本控制的具体建议。"},{title:"现金流管理",description:"优化现金流管理策略",prompt:"请帮我制定一个有效的现金流管理策略，确保公司资金安全。"}],L=[{id:"vouchers",title:"会计凭证管理",description:"管理记账凭证，支持凭证录入、审核、查询",icon:l.Z,color:"bg-green-500",href:"/vouchers"},{id:"accounts",title:"账目管理",description:"查看和管理会计科目",icon:i.Z,color:"bg-blue-500",href:"/accounts"},{id:"reports",title:"财务报表",description:"生成各类财务报表",icon:n.Z,color:"bg-purple-500",href:"/reports"},{id:"invoices",title:"发票管理",description:"管理进销项发票",icon:c.Z,color:"bg-orange-500",href:"/invoices"},{id:"tax",title:"税务管理",description:"税务计算和申报",icon:d.Z,color:"bg-red-500",href:"/tax"}];function P(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(null),[P,A]=(0,a.useState)(""),[z,F]=(0,a.useState)(!1),[q,E]=(0,a.useState)([]),[R,I]=(0,a.useState)(null),[V,B]=(0,a.useState)(""),[U,G]=(0,a.useState)(!1),[W,T]=(0,a.useState)(!1),[H,K]=(0,a.useState)(280),[O,X]=(0,a.useState)(!1),[J,Q]=(0,a.useState)([]),[Y,ee]=(0,a.useState)(!1),[et,es]=(0,a.useState)(!0),[er,ea]=(0,a.useState)(null),[el,ei]=(0,a.useState)(!1),en=(0,a.useRef)(null),ec=(0,a.useRef)(null),[ed]=(0,a.useState)({totalAssets:25e5,totalLiabilities:8e5,netProfit:32e4,revenue:18e5,cashFlow:45e4,pendingVouchers:15,overdueInvoices:3,taxDeadlines:2}),[eo]=(0,a.useState)([{id:"1",voucherNumber:"V202412001",date:"2024-12-01",summary:"销售商品收入",amount:5e4,status:"已审核"},{id:"2",voucherNumber:"V202412002",date:"2024-12-01",summary:"原材料采购",amount:25e3,status:"待审核"},{id:"3",voucherNumber:"V202412003",date:"2024-12-01",summary:"办公用品采购",amount:3e3,status:"已审核"}]),[ex]=(0,a.useState)([{id:"1",title:"审核12月份凭证",type:"voucher",priority:"high",dueDate:"2024-12-05",completed:!1},{id:"2",title:"处理逾期发票",type:"invoice",priority:"high",dueDate:"2024-12-03",completed:!1},{id:"3",title:"准备税务申报",type:"tax",priority:"medium",dueDate:"2024-12-10",completed:!1},{id:"4",title:"编制月度报表",type:"report",priority:"medium",dueDate:"2024-12-08",completed:!1}]),[em]=(0,a.useState)([{month:"8月",revenue:15e5,expenses:12e5,profit:3e5},{month:"9月",revenue:16e5,expenses:125e4,profit:35e4},{month:"10月",revenue:17e5,expenses:13e5,profit:4e5},{month:"11月",revenue:18e5,expenses:135e4,profit:45e4},{month:"12月",revenue:18e5,expenses:148e4,profit:32e4}]),eh=()=>{let s={id:Date.now().toString(),title:`新对话 ${e.length+1}`,messages:[],createdAt:new Date};t([s,...e]),o(s),E([]),es(!1)},eu=r=>{let a=e.filter(e=>e.id!==r);t(a),s?.id===r&&(a.length>0?o(a[0]):(o(null),es(!0)))},eg=e=>{I(e.id),B(e.title),setTimeout(()=>{ec.current?.focus(),ec.current?.select()},100)},ep=()=>{R&&V.trim()&&(t(e.map(e=>e.id===R?{...e,title:V.trim()}:e)),s?.id===R&&o({...s,title:V.trim()}),I(null),B(""))},eb=()=>{I(null),B("")},ey=e=>{"Enter"===e.key?ep():"Escape"===e.key&&eb()},ej=e=>{E(t=>t.filter(t=>t.id!==e))},ef=async e=>{let t=["办公用品采购","差旅费报销","业务招待费","交通费支出","通讯费支出","广告宣传费","培训费支出","水电费支出","房租费支出","维修费支出","保险费支出","咨询费支出","技术服务费","材料采购","商品销售","工资发放","税费缴纳","利息收入","利息支出"];return e.map((e,s)=>{let r=`记${String(Date.now()).slice(-6)}-${String(s+1).padStart(3,"0")}`,a=new Date(Date.now()-2592e6*Math.random()).toLocaleDateString(),l=t[Math.floor(Math.random()*t.length)],i=[],n=Math.floor(5e3*Math.random())+100;return l.includes("采购")||l.includes("支出")?(i.push({id:`entry_${Date.now()}_${s}_1`,account:"管理费用",debit:n,credit:0,summary:l}),i.push({id:`entry_${Date.now()}_${s}_2`,account:"银行存款",debit:0,credit:n,summary:l})):l.includes("销售")?(i.push({id:`entry_${Date.now()}_${s}_1`,account:"银行存款",debit:n,credit:0,summary:l}),i.push({id:`entry_${Date.now()}_${s}_2`,account:"主营业务收入",debit:0,credit:n,summary:l})):(l.includes("工资")?i.push({id:`entry_${Date.now()}_${s}_1`,account:"应付职工薪酬",debit:n,credit:0,summary:l}):i.push({id:`entry_${Date.now()}_${s}_1`,account:"其他应收款",debit:n,credit:0,summary:l}),i.push({id:`entry_${Date.now()}_${s}_2`,account:"银行存款",debit:0,credit:n,summary:l})),{id:`voucher_${Date.now()}_${s}`,voucherNumber:r,date:a,attachments:1,attachmentFiles:[e],summary:l,entries:i,status:"pending",confidence:Math.floor(20*Math.random())+80,fileName:e.name}})},eN=r=>{if(!s||!r.trim()&&0===q.length)return;let a={id:Date.now().toString(),content:r.trim(),role:"user",timestamp:new Date,attachments:q.length>0?[...q]:void 0},l={...s,messages:[...s.messages,a]};t(e.map(e=>e.id===s.id?l:e)),o(l),A(""),F(!0),setTimeout(async()=>{let r="",a=[];if(q.length>0)Q(a=await ef(q)),ee(!0),r=`🔍 凭证识别完成！

已成功识别以下凭证信息：

${a.map(e=>`📄 ${e.fileName}
   - 凭证字号：${e.voucherNumber}
   - 日期：${e.date}
   - 摘要：${e.summary}
   - 附件：${e.attachments}张
   - 置信度：${e.confidence}%
   - 会计分录：
${e.entries.map(e=>`     ${e.account} ${e.debit>0?`借 ${e.debit.toLocaleString()}`:`贷 ${e.credit.toLocaleString()}`}`).join("\n")}
`).join("\n")}

请确认以下信息是否正确，确认后将录入到财务系统中。`;else{let e=["根据您的问题，我建议从以下几个方面进行分析：首先，我们需要查看相关的财务数据；其次，进行市场环境分析；最后，制定相应的策略。","这是一个很好的财务问题。让我为您详细分析一下：1. 风险评估 2. 收益预测 3. 市场趋势 4. 建议方案。","基于您提供的信息，我的专业建议是：重点关注现金流管理，优化成本结构，并建立完善的风险控制体系。","从财务角度来说，这个项目需要考虑：投资回报率、风险系数、市场前景等因素。我建议进行更深入的分析。","关于税务筹划，我建议：1. 合理利用税收优惠政策 2. 优化企业结构 3. 合规经营 4. 定期咨询专业税务师。"];r=e[Math.floor(Math.random()*e.length)]}let i={id:(Date.now()+1).toString(),content:r,role:"assistant",timestamp:new Date,voucherData:q.length>0?a:void 0,needsConfirmation:q.length>0},n={...l,messages:[...l.messages,i]};t(e.map(e=>e.id===s.id?n:e)),o(n),F(!1),E([])},2e3)},ev=(e,t)=>{Q(s=>s.map(s=>s.id===e?{...s,status:"confirm"===t?"confirmed":"rejected"}:s))},ew=e=>{ea(e),ei(!0)},ek=()=>{ei(!1),ea(null)},eC=(e,t)=>{er&&ea({...er,[e]:t})},eZ=(e,t,s)=>{if(!er)return;let r=er.entries.map(r=>r.id===e?{...r,[t]:s}:r);ea({...er,entries:r})},eM=e=>{if(!er||er.entries.length<=2)return;let t=er.entries.filter(t=>t.id!==e);ea({...er,entries:t})},eS=e=>e.reduce((e,t)=>e+t.debit,0),e$=e=>e.reduce((e,t)=>e+t.credit,0),e_=e=>{er&&ea({...er,attachmentFiles:er.attachmentFiles.filter(t=>t.id!==e),attachments:er.attachmentFiles.length-1})},eD=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},eL=e=>{if(!O)return;let t=window.innerWidth-e.clientX;t>200&&t<500&&K(t)},eP=()=>{X(!1)};return(0,a.useEffect)(()=>{if(O)return document.addEventListener("mousemove",eL),document.addEventListener("mouseup",eP),()=>{document.removeEventListener("mousemove",eL),document.removeEventListener("mouseup",eP)}},[O]),(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:(0,$.cn)("bg-white border-r border-gray-200 flex flex-col transition-all duration-300",U?"w-16":"w-80"),children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[U?r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsx(x,{className:"w-6 h-6 text-blue-600"})}):(0,r.jsxs)("h1",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(x,{className:"w-6 h-6 text-blue-600"}),"财务AI助手"]}),r.jsx("button",{onClick:()=>G(!U),className:"p-1 text-gray-600 hover:text-blue-600 transition-colors",title:U?"展开侧边栏":"收起侧边栏",children:U?r.jsx(m,{className:"w-5 h-5"}):r.jsx(h,{className:"w-5 h-5"})})]}),U?r.jsx("div",{className:"p-2",children:r.jsx("button",{onClick:eh,className:"w-full bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",title:"新建对话",children:r.jsx(u.Z,{className:"w-4 h-4"})})}):r.jsx("div",{className:"p-4",children:(0,r.jsxs)("button",{onClick:eh,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(u.Z,{className:"w-4 h-4"}),"新建对话"]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[!U&&r.jsx("div",{className:"px-4 pb-2",children:r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"对话记录"})}),e.map(e=>r.jsx("div",{className:(0,$.cn)("border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors",U?"p-2":"p-4",s?.id===e.id&&"bg-blue-50 border-blue-200"),onClick:()=>{o(e),es(!1)},children:U?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[r.jsx("div",{className:(0,$.cn)("w-8 h-8 rounded-full flex items-center justify-center mb-1",s?.id===e.id?"bg-blue-600":"bg-gray-200"),children:r.jsx(x,{className:(0,$.cn)("w-4 h-4",s?.id===e.id?"text-white":"text-gray-600")})}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-400"})]}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[R===e.id?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{ref:ec,type:"text",value:V,onChange:e=>B(e.target.value),onKeyDown:ey,onBlur:ep,className:"flex-1 text-sm font-medium text-gray-900 bg-white border border-blue-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:50}),r.jsx("button",{onClick:ep,className:"text-green-600 hover:text-green-700 p-1",title:"保存",children:r.jsx(g,{className:"w-3 h-3"})}),r.jsx("button",{onClick:eb,className:"text-red-600 hover:text-red-700 p-1",title:"取消",children:r.jsx(p.Z,{className:"w-3 h-3"})})]}):(0,r.jsxs)("div",{className:"flex items-center gap-2 group",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate flex-1",children:e.title}),r.jsx("button",{onClick:t=>{t.stopPropagation(),eg(e)},className:"text-gray-400 hover:text-blue-600 transition-colors opacity-0 group-hover:opacity-100 p-1",title:"编辑标题",children:r.jsx(b.Z,{className:"w-3 h-3"})})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.messages.length," 条消息"]})]}),r.jsx("button",{onClick:t=>{t.stopPropagation(),eu(e.id)},className:"text-gray-400 hover:text-red-500 transition-colors p-1",title:"删除对话",children:r.jsx(y.Z,{className:"w-4 h-4"})})]})},e.id))]}),(0,r.jsxs)("div",{className:"border-t border-gray-200",children:[!U&&r.jsx("div",{className:"px-4 py-2",children:r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"AI助手功能"})}),U?r.jsx("div",{className:"p-2",children:(0,r.jsxs)("a",{href:"/mcp-apps",className:"flex flex-col items-center justify-center p-2 text-center text-xs text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:"第三方服务集成管理",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-indigo-500 mb-1",children:r.jsx(j,{className:"w-4 h-4 text-white"})}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-400"})]})}):r.jsx("div",{className:"px-4 pb-4",children:(0,r.jsxs)("a",{href:"/mcp-apps",className:"flex items-center gap-3 p-3 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:"第三方服务集成管理",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center bg-indigo-500",children:r.jsx(j,{className:"w-4 h-4 text-white"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"财务MCP"}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:"第三方服务集成管理"})]})]})})]})]}),r.jsx("div",{className:"flex-1 flex flex-col",children:et?r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"财务概览"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"总资产"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-blue-900",children:["\xa5",ed.totalAssets.toLocaleString()]})]}),r.jsx(i.Z,{className:"w-8 h-8 text-blue-600"})]})}),r.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-green-600 font-medium",children:"净利润"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-green-900",children:["\xa5",ed.netProfit.toLocaleString()]})]}),r.jsx(n.Z,{className:"w-8 h-8 text-green-600"})]})}),r.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"营业收入"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-purple-900",children:["\xa5",ed.revenue.toLocaleString()]})]}),r.jsx(f,{className:"w-8 h-8 text-purple-600"})]})}),r.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"现金流"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-orange-900",children:["\xa5",ed.cashFlow.toLocaleString()]})]}),r.jsx(d.Z,{className:"w-8 h-8 text-orange-600"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"待办事项"}),r.jsx("div",{className:"space-y-2",children:ex.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:(0,$.cn)("w-2 h-2 rounded-full","high"===e.priority?"bg-red-500":"medium"===e.priority?"bg-yellow-500":"bg-green-500")}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-gray-900 truncate",children:e.title}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["截止: ",e.dueDate]})]})]},e.id))})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"重要提醒"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-red-50 rounded-lg",children:[r.jsx(l.Z,{className:"w-4 h-4 text-red-600"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-red-900 font-medium",children:[ed.pendingVouchers," 张凭证待审核"]}),r.jsx("p",{className:"text-xs text-red-600",children:"需要及时处理"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-yellow-50 rounded-lg",children:[r.jsx(c.Z,{className:"w-4 h-4 text-yellow-600"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-yellow-900 font-medium",children:[ed.overdueInvoices," 张发票逾期"]}),r.jsx("p",{className:"text-xs text-yellow-600",children:"需要跟进处理"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-blue-50 rounded-lg",children:[r.jsx(d.Z,{className:"w-4 h-4 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-blue-900 font-medium",children:[ed.taxDeadlines," 个税务截止日期"]}),r.jsx("p",{className:"text-xs text-blue-600",children:"需要提前准备"})]})]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"最近凭证"}),r.jsx("a",{href:"/vouchers",className:"text-sm text-blue-600 hover:text-blue-700",children:"查看全部"})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"凭证号"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"日期"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"摘要"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"金额"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"状态"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:eo.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.voucherNumber}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-500",children:e.date}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.summary}),(0,r.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900",children:["\xa5",e.amount.toLocaleString()]}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("span",{className:(0,$.cn)("inline-flex px-2 py-1 text-xs font-semibold rounded-full","已审核"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"财务趋势"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:em.slice(-3).map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:e.month}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"收入:"}),(0,r.jsxs)("span",{className:"text-green-600 font-medium",children:["\xa5",e.revenue.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"支出:"}),(0,r.jsxs)("span",{className:"text-red-600 font-medium",children:["\xa5",e.expenses.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm font-medium",children:[r.jsx("span",{className:"text-gray-700",children:"利润:"}),(0,r.jsxs)("span",{className:(0,$.cn)(e.profit>=0?"text-green-600":"text-red-600"),children:["\xa5",e.profit.toLocaleString()]})]})]})]},t))})]})]}),r.jsx("div",{className:"w-80 flex-shrink-0",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI助手推荐"}),(0,r.jsxs)("button",{onClick:eh,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",children:[r.jsx(u.Z,{className:"w-4 h-4"}),"新建会话"]})]}),r.jsx("div",{className:"space-y-3",children:D.map((e,t)=>r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-colors group",onClick:()=>{eh(),setTimeout(()=>{A(e.prompt);let t=document.querySelector('textarea[name="message"]');t&&t.focus()},100)},children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0",children:r.jsx(j,{className:"w-4 h-4 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-1 group-hover:text-blue-600 transition-colors",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600",children:e.description})]}),r.jsx("div",{className:"text-gray-400 group-hover:text-blue-600 transition-colors",children:r.jsx(m,{className:"w-4 h-4"})})]})},t))})]})})]})}):s?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"bg-white border-b border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>{es(!0),o(null),E([]),Q([]),ee(!1)},className:"text-gray-400 hover:text-blue-600 transition-colors p-1",title:"返回首页",children:r.jsx(N.Z,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:s.title})]}),r.jsx("button",{onClick:()=>eg(s),className:"text-gray-400 hover:text-blue-600 transition-colors p-2",title:"编辑对话标题",children:r.jsx(b.Z,{className:"w-4 h-4"})})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===s.messages.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx(v,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"欢迎使用财务AI助手"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"我可以帮助您进行财务分析、投资评估、税务筹划等工作，还可以处理凭证附件"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl mx-auto",children:D.map((e,t)=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 hover:border-blue-300 cursor-pointer transition-colors",onClick:()=>{A(e.prompt);let t=document.querySelector('textarea[name="message"]');t&&t.focus()},children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600",children:e.description})]},t))})]}),s.messages.map(e=>(0,r.jsxs)("div",{className:(0,$.cn)("flex gap-3","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(v,{className:"w-4 h-4 text-white"})}),(0,r.jsxs)("div",{className:(0,$.cn)("max-w-[70%] p-3 rounded-lg","user"===e.role?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"),children:[r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.attachments&&e.attachments.length>0&&r.jsx("div",{className:"mt-3 space-y-2",children:e.attachments.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded",children:[r.jsx(c.Z,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-xs text-blue-800",children:e.name}),(0,r.jsxs)("span",{className:"text-xs text-blue-600",children:["(",eD(e.size),")"]})]},e.id))}),r.jsx("p",{className:(0,$.cn)("text-xs mt-1","user"===e.role?"text-blue-100":"text-gray-500"),children:e.timestamp.toLocaleTimeString()})]}),"user"===e.role&&r.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(w,{className:"w-4 h-4 text-white"})})]},e.id)),z&&(0,r.jsxs)("div",{className:"flex gap-3 justify-start",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(v,{className:"w-4 h-4 text-white"})}),r.jsx("div",{className:"bg-white border border-gray-200 text-gray-900 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(k.Z,{className:"w-4 h-4 animate-spin"}),r.jsx("span",{className:"text-sm",children:"AI正在思考中..."})]})})]}),Y&&J.length>0&&(0,r.jsxs)("div",{className:"bg-white border border-blue-200 rounded-lg p-4 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(g,{className:"w-5 h-5 text-blue-600"}),"凭证确认"]}),r.jsx("span",{className:"text-sm text-gray-500",children:"请确认以下凭证信息是否正确"})]}),r.jsx("div",{className:"space-y-3 mb-4",children:J.map(e=>r.jsx("div",{className:(0,$.cn)("border rounded-lg p-3 transition-colors","confirmed"===e.status?"border-green-200 bg-green-50":"rejected"===e.status?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(c.Z,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"font-medium text-gray-900",children:e.fileName}),(0,r.jsxs)("span",{className:(0,$.cn)("px-2 py-1 text-xs rounded-full",e.confidence>=90?"bg-green-100 text-green-800":e.confidence>=80?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["置信度: ",e.confidence,"%"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"凭证字号:"}),r.jsx("span",{className:"ml-1 text-gray-900",children:e.voucherNumber})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"日期:"}),r.jsx("span",{className:"ml-1 text-gray-900",children:e.date})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"附件:"}),(0,r.jsxs)("span",{className:"ml-1 text-gray-900",children:[e.attachments,"张"]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"摘要:"}),r.jsx("span",{className:"ml-1 text-gray-900",children:e.summary})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-600",children:"附件文件:"}),r.jsx("div",{className:"mt-1 space-y-1",children:e.attachmentFiles.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs bg-blue-50 p-1 rounded",children:[r.jsx(c.Z,{className:"w-3 h-3 text-blue-600"}),r.jsx("span",{className:"text-gray-700",children:e.name}),(0,r.jsxs)("span",{className:"text-gray-500",children:["(",eD(e.size),")"]})]},t))})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-gray-600",children:"会计分录:"}),r.jsx("div",{className:"mt-1 space-y-1",children:e.entries.map((e,t)=>(0,r.jsxs)("div",{className:"text-xs bg-gray-100 p-1 rounded",children:[e.account," ",e.debit>0?`借 ${e.debit.toLocaleString()}`:`贷 ${e.credit.toLocaleString()}`]},e.id))})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-4",children:["pending"===e.status&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{onClick:()=>ew(e),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:"编辑"}),r.jsx("button",{onClick:()=>ev(e.id,"confirm"),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors",children:"确认"}),r.jsx("button",{onClick:()=>ev(e.id,"reject"),className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",children:"拒绝"})]}),"confirmed"===e.status&&r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"已确认"}),"rejected"===e.status&&r.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"已拒绝"})]})]})},e.id))}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["已确认: ",J.filter(e=>"confirmed"===e.status).length," / 已拒绝: ",J.filter(e=>"rejected"===e.status).length," / 待处理: ",J.filter(e=>"pending"===e.status).length]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{Q([]),ee(!1);let r={id:Date.now().toString(),content:"❌ 已取消凭证录入。\n\n如需重新处理，请重新上传凭证附件。",role:"assistant",timestamp:new Date};if(s){let a={...s,messages:[...s.messages,r]};t(e.map(e=>e.id===s.id?a:e)),o(a)}},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"全部取消"}),r.jsx("button",{onClick:()=>{let r=J.map(e=>({...e,status:"confirmed"})),a={id:Date.now().toString(),content:`✅ 凭证确认完成！

已成功录入以下凭证到财务系统：

${r.map(e=>`📄 ${e.fileName}
   - 凭证字号：${e.voucherNumber}
   - 摘要：${e.summary}
   - 状态：已录入
`).join("\n")}

所有凭证已成功录入财务系统，您可以在凭证管理模块中查看。`,role:"assistant",timestamp:new Date};if(s){let r={...s,messages:[...s.messages,a]};t(e.map(e=>e.id===s.id?r:e)),o(r)}Q([]),ee(!1)},disabled:J.every(e=>"pending"===e.status),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"确认录入"})]})]})]})]}),q.length>0&&(0,r.jsxs)("div",{className:"bg-gray-50 border-t border-gray-200 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["已选择的附件 (",q.length,")"]}),r.jsx("button",{onClick:()=>E([]),className:"text-sm text-red-600 hover:text-red-700",children:"清空全部"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-white p-2 rounded-lg border border-gray-200",children:[r.jsx(c.Z,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-700 max-w-32 truncate",children:e.name}),r.jsx("span",{className:"text-xs text-gray-500",children:eD(e.size)}),r.jsx("button",{onClick:()=>ej(e.id),className:"text-gray-400 hover:text-red-500",children:r.jsx(p.Z,{className:"w-3 h-3"})})]},e.id))})]}),(0,r.jsxs)("div",{className:"bg-white border-t border-gray-200 p-4",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>en.current?.click(),className:"px-3 py-2 text-gray-600 hover:text-blue-600 transition-colors flex items-center gap-2",title:"上传凭证附件",children:r.jsx(C,{className:"w-5 h-5"})}),r.jsx("input",{ref:en,type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx",onChange:e=>{let t=e.target.files;t&&Array.from(t).forEach(e=>{let t={id:Date.now().toString()+Math.random(),name:e.name,type:e.type,size:e.size,url:URL.createObjectURL(e)};E(e=>[...e,t])})},className:"hidden"}),r.jsx("input",{type:"text",value:P,onChange:e=>A(e.target.value),onKeyPress:e=>"Enter"===e.key&&eN(P),placeholder:q.length>0?"输入备注信息（可选）...":"输入您的财务问题或上传凭证附件...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:z}),r.jsx("button",{onClick:()=>eN(P),disabled:!P.trim()&&0===q.length||z,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:r.jsx(Z,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"支持的文件格式：PDF、图片、Word、Excel等凭证文件"})]})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(x,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"开始新的对话"}),r.jsx("p",{className:"text-gray-500 mb-4",children:'点击"新建对话"开始与AI助手交流'}),(0,r.jsxs)("button",{onClick:eh,className:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[r.jsx(u.Z,{className:"w-4 h-4"}),"新建对话"]})]})})}),(0,r.jsxs)("div",{className:(0,$.cn)("bg-white border-l border-gray-200 flex flex-col transition-all duration-300",W?"w-16":`w-[${H}px]`),style:{width:W?"64px":`${H}px`},children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[W?r.jsx("div",{className:"flex items-center justify-center w-full",children:r.jsx(n.Z,{className:"w-6 h-6 text-blue-600"})}):r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"功能模块"}),r.jsx("button",{onClick:()=>T(!W),className:"p-1 text-gray-600 hover:text-blue-600 transition-colors",title:W?"展开功能模块":"收起功能模块",children:W?r.jsx(h,{className:"w-5 h-5"}):r.jsx(m,{className:"w-5 h-5"})})]}),W?r.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:r.jsx("div",{className:"space-y-2",children:L.map(e=>(0,r.jsxs)("a",{href:e.href,className:"flex flex-col items-center justify-center p-2 text-center text-xs text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:e.description,children:[r.jsx("div",{className:(0,$.cn)("w-8 h-8 rounded-lg flex items-center justify-center mb-1",e.color),children:r.jsx(e.icon,{className:"w-4 h-4 text-white"})}),r.jsx("div",{className:"w-1 h-1 rounded-full bg-gray-400"})]},e.id))})}):r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r.jsx("div",{className:"space-y-3",children:L.map(e=>(0,r.jsxs)("a",{href:e.href,className:"flex items-center gap-3 p-3 text-left text-sm text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",title:e.description,children:[r.jsx("div",{className:(0,$.cn)("w-8 h-8 rounded-lg flex items-center justify-center",e.color),children:r.jsx(e.icon,{className:"w-4 h-4 text-white"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.title}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.description})]})]},e.id))})})]}),!W&&r.jsx("div",{className:"w-1 bg-gray-200 hover:bg-gray-300 cursor-col-resize flex items-center justify-center",onMouseDown:e=>{X(!0),e.preventDefault()},children:r.jsx(M,{className:"w-3 h-3 text-gray-400"})}),el&&er&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"编辑凭证"}),r.jsx("button",{onClick:ek,className:"text-gray-400 hover:text-gray-600",children:r.jsx(p.Z,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"凭证字号"}),r.jsx("input",{type:"text",value:er.voucherNumber,onChange:e=>eC("voucherNumber",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"日期"}),r.jsx("input",{type:"date",value:er.date,onChange:e=>eC("date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"摘要"}),r.jsx("input",{type:"text",value:er.summary,onChange:e=>eC("summary",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"附件管理"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-400 transition-colors",children:[r.jsx("input",{ref:en,type:"file",multiple:!0,onChange:e=>{let t=e.target.files;t&&er&&Array.from(t).forEach(e=>{let t={id:Date.now().toString()+Math.random(),name:e.name,type:e.type,size:e.size,url:URL.createObjectURL(e)};ea(e=>e?{...e,attachmentFiles:[...e.attachmentFiles,t],attachments:e.attachmentFiles.length+1}:null)})},className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif"}),(0,r.jsxs)("button",{type:"button",onClick:()=>en.current?.click(),className:"w-full flex flex-col items-center justify-center py-4 text-gray-600 hover:text-blue-600 transition-colors",children:[r.jsx(S.Z,{className:"w-8 h-8 mb-2"}),r.jsx("span",{className:"text-sm",children:"点击上传附件"}),r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"支持 PDF、Word、Excel、图片等格式"})]})]}),er.attachmentFiles.length>0&&(0,r.jsxs)("div",{className:"mt-3 space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"已上传的附件:"}),er.attachmentFiles.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(c.Z,{className:"w-4 h-4 text-blue-600"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:e.name}),r.jsx("p",{className:"text-xs text-gray-500",children:eD(e.size)})]})]}),r.jsx("button",{onClick:()=>e_(e.id),className:"text-red-600 hover:text-red-800 p-1",children:r.jsx(p.Z,{className:"w-4 h-4"})})]},e.id))]})]})]}),r.jsx("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"借贷平衡检查"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"借方合计:"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-red-600",children:["\xa5",eS(er.entries).toLocaleString()]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-600",children:"贷方合计:"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-green-600",children:["\xa5",e$(er.entries).toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"mt-3",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"差额:"}),(0,r.jsxs)("p",{className:(0,$.cn)("text-lg font-semibold",.01>Math.abs(eS(er.entries)-e$(er.entries))?"text-green-600":"text-red-600"),children:["\xa5",(eS(er.entries)-e$(er.entries)).toLocaleString()]})]})]})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"会计分录"}),(0,r.jsxs)("button",{onClick:()=>{if(!er)return;let e={id:`entry_${Date.now()}_${Math.random()}`,account:"",debit:0,credit:0,summary:""};ea({...er,entries:[...er.entries,e]})},className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm",children:[r.jsx(u.Z,{className:"w-4 h-4"}),"添加分录"]})]}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"序号"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"会计科目"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"摘要"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"借方金额"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"贷方金额"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"操作"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:er.entries.map((e,t)=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 border-b border-gray-200",children:t+1}),r.jsx("td",{className:"px-4 py-3 border-b border-gray-200",children:(0,r.jsxs)("select",{value:e.account,onChange:t=>eZ(e.id,"account",t.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"",children:"请选择科目"}),_.map(e=>r.jsx("option",{value:e,children:e},e))]})}),r.jsx("td",{className:"px-4 py-3 border-b border-gray-200",children:r.jsx("input",{type:"text",value:e.summary,onChange:t=>eZ(e.id,"summary",t.target.value),placeholder:"摘要",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})}),r.jsx("td",{className:"px-4 py-3 border-b border-gray-200",children:r.jsx("input",{type:"number",value:e.debit,onChange:t=>eZ(e.id,"debit",parseFloat(t.target.value)||0),placeholder:"0.00",step:"0.01",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})}),r.jsx("td",{className:"px-4 py-3 border-b border-gray-200",children:r.jsx("input",{type:"number",value:e.credit,onChange:t=>eZ(e.id,"credit",parseFloat(t.target.value)||0),placeholder:"0.00",step:"0.01",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})}),r.jsx("td",{className:"px-4 py-3 border-b border-gray-200",children:er.entries.length>2&&r.jsx("button",{onClick:()=>eM(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"删除"})})]},e.id))})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[r.jsx("button",{onClick:ek,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"取消"}),r.jsx("button",{onClick:()=>{er&&(Q(e=>e.map(e=>e.id===er.id?{...er,attachments:er.attachmentFiles.length}:e)),ei(!1),ea(null))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"保存"})]})]})})]})}},1626:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(6815),a=s(9377);function l(...e){return(0,a.m6)((0,r.W)(e))}},9224:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(3729),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,...x},m)=>(0,r.createElement)("svg",{ref:m,...a,width:i,height:i,stroke:s,strokeWidth:c?24*Number(n)/Number(i):n,className:["lucide",`lucide-${l(e)}`,d].join(" "),...x},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s}},3024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},340:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},5329:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},9046:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},3733:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(9224).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2295:(e,t,s)=>{"use strict";e.exports=s(6372).vendored["react-ssr"].ReactJsxRuntime},2917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var r=s(5036),a=s(8592),l=s.n(a);s(7272);let i={title:"财务AI助手 - 专业的财务咨询机器人",description:"专业的财务AI助手，提供财务报表分析、投资风险评估、税务筹划等财务咨询服务"};function n({children:e}){return r.jsx("html",{lang:"zh-CN",children:r.jsx("body",{className:l().className,children:e})})}},751:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let r=(0,s(6843).createProxy)(String.raw`/Users/gmy/workspace/demo/frontend/app/page.tsx`),{__esModule:a,$$typeof:l}=r,i=r.default},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[242,263],()=>s(8463));module.exports=r})();